<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>NGS home</title>

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" th:href="@{webjars/bootstrap/4.2.1/css/bootstrap.min.css}"/>
    <link rel="stylesheet" th:href="@{/css/main.css}"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
<span th:replace="fragments/header :: header">Missing header</span>
<div th:if="${backend!=null}">
    Hello, <span th:text="${backend.name}">placeholder</span>! <a href="/addScript">Add a script.</a><br>
    <ul th:each="s : ${backend.getScripts()}">
        <li>
            <form action="#" method="get">
                <input type="submit" name="script" th:value="${s}">
            </form>
        </li>
    </ul>
</div>
<span th:if="${backend==null}">
    <a href="/">No user found, go log in!</a>
</span>
<div th:if="${script!=null}">
    <hr><hr>
    <form action="/runningScripts" method="get">
        Config file:<input type="text" name="configFile" placeholder="-"><br>
        <table>
            <tr>
                <th></th>
                <th th:each="i:${script.getInputs()}" th:text="${i.toString()}"></th>
            </tr>
            <tr>
                <td></td>
                <td th:each="i:${script.getInputs()}" th:text="${i.filter}"></td>
            </tr>
            <tr>
                <td>Sample 1</td>
                <td th:each="i:${script.getInputs()}">
                    <datalist th:id="${i.toString()}" >
                        <select>
                            <option
                                    th:each="v : ${backend.getFolderTree().allFilesDirs(i.filter, backend.getFolderTree().root())}"
                                    th:value="${v}"></option>
                        </select>
                    </datalist>
                    <input type="text" th:name="${i.toString()+'1'}" th:list="${i.toString()}">
                </td>
            </tr>
            <tr>
                <td>Sample 2</td>
                <td th:each="i:${script.getInputs()}">
                    <datalist th:id="${i.toString()}" >
                        <select>
                            <option
                                    th:each="v : ${backend.getFolderTree().allFilesDirs(i.filter, backend.getFolderTree().root())}"
                                    th:value="${v}"></option>
                        </select>
                    </datalist>
                    <input type="text" th:name="${i.toString()+'2'}" th:list="${i.toString()}">
                </td>
            </tr>
            <tr>
                <td>Sample 3</td>
                <td th:each="i:${script.getInputs()}">
                    <datalist th:id="${i.toString()}" >
                        <select>
                            <option
                                    th:each="v : ${backend.getFolderTree().allFilesDirs(i.filter, backend.getFolderTree().root())}"
                                    th:value="${v}"></option>
                        </select>
                    </datalist>
                    <input type="text" th:name="${i.toString()+'3'}" th:list="${i.toString()}">
                </td>
            </tr>
        </table>
        <input type="submit" name="script" th:value="${script}">
    </form>
</div>
<ul th:replace="fragments/fileManager :: fileManager(${backend.getFolderTree()})"></ul>
<ul id="ulName">
    <li data-sortby="3">three</li>
    <li data-sortby="1">one</li>
    <li data-sortby="2">two</li>
    <li data-sortby="4">four</li>
</ul>
<script>
    function sort(){    
    var ul = $('ul#ulName'),
        li = ul.children('li');


    li.detach().sort(function(a,b) {
        return $(a).data('sortby') - $(b).data('sortby');
    });

    ul.append(li);
};
</script>
<button type="button" onclick="sort()">sort</button>
</body>
</html>